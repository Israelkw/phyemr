<div class="container py-4">

<form action="#" id="generalAssessmentForm" method="post" novalidate>
    
<!-- FIELDSET 1 -->
<fieldset class="expanded mt-0">
    <legend>General Assessment Form</legend>

    <div class="mb-2">
        <label class="form-label" for="General Assessment Form Name">Name:</label>
        <input class="form-control form-control-sm" id="General Assessment Form Name" name="General Assessment Form Name" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="General Assessment Form Sex">Sex:</label>
        <input class="form-control form-control-sm" id="General Assessment Form Sex" name="General Assessment Form Sex" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="General Assessment Form Age">Age:</label>
        <input class="form-control form-control-sm" id="General Assessment Form Age" name="General Assessment Form Age" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="General Assessment Form Treating Clinician">Treating Clinician:</label>
        <input class="form-control form-control-sm" id="General Assessment Form Treating Clinician" name="General Assessment Form Treating Clinician" placeholder="details..." type="text">
    </div>

    <p class="fw-bold mb-1">Vital Sign</p>
</fieldset>

<!-- FIELDSET 2 -->
<fieldset class="mt-4">
    <legend>Additional Assessment Details</legend>

    <p class="fw-bold mb-1">Physical Examination</p>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Physical Examination Observation">Observation:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Physical Examination Observation" name="Additional Assessment Details Physical Examination Observation" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Physical Examination Palpation">Palpation:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Physical Examination Palpation" name="Additional Assessment Details Physical Examination Palpation" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Physical Examination Muscle tone">Muscle tone:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Physical Examination Muscle tone" name="Additional Assessment Details Physical Examination Muscle tone" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Physical Examination Muscle power">Muscle power:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Physical Examination Muscle power" name="Additional Assessment Details Physical Examination Muscle power" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Physical Examination Reflex">Reflex:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Physical Examination Reflex" name="Additional Assessment Details Physical Examination Reflex" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Physical Examination Special Tests">Special Tests:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Physical Examination Special Tests" name="Additional Assessment Details Physical Examination Special Tests" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Physical Examination Pt Diagnosis">Pt Diagnosis:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Physical Examination Pt Diagnosis" name="Additional Assessment Details Physical Examination Pt Diagnosis" placeholder="details..." type="text">
    </div>

    <p class="fw-bold mb-1">Goal</p>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Goal Short">Short:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Goal Short" name="Additional Assessment Details Goal Short" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Goal Long">Long:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Goal Long" name="Additional Assessment Details Goal Long" placeholder="details..." type="text">
    </div>

    <div class="mb-2">
        <label class="form-label" for="Additional Assessment Details Goal Plan">Plan:</label>
        <input class="form-control form-control-sm" id="Additional Assessment Details Goal Plan" name="Additional Assessment Details Goal Plan" placeholder="details..." type="text">
    </div>
</fieldset>

<div class="mt-3" id="generalAssessmentForm-message"></div>

<div class="form-group mt-3">
    <button class="btn btn-success" type="submit">Submit Data</button>
    <button class="btn btn-danger" type="reset">Reset</button>
</div>

</form>


<!-- FIELDSET TOGGLER -->
<script>
document.querySelectorAll("fieldset").forEach((fieldset) => {
    const legend = fieldset.querySelector("legend");
    if (!legend) return;

    legend.setAttribute("role", "button");
    legend.setAttribute("tabindex", "0");
    legend.setAttribute("aria-expanded", fieldset.classList.contains("expanded"));

    legend.addEventListener("click", () => {
        fieldset.classList.toggle("expanded");
        legend.setAttribute("aria-expanded", fieldset.classList.contains("expanded"));
    });

    legend.addEventListener("keydown", (event) => {
        if (event.key === "Enter" || event.key === " ") {
            event.preventDefault();
            legend.click();
        }
    });
});
</script>

<script src="../js/form_handler.js"></script>

<!-- FIXED DOMContentLoaded -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    initFormSubmissionHandler('generalAssessmentForm', 'generalAssessmentForm-message');
});
</script>

</div>
