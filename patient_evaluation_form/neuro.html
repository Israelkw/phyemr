<div class="container py-4">
<form action="#" id="neuroForm" method="post" novalidate="">
<!-- Physical Examination -->
<!-- Added expanded class to one fieldset to show it open on load as an example -->
<fieldset class="physical-examination expanded">
<legend>Physical Examination</legend>
<label for="Physical Examination Observations">Observations:</label>
<textarea class="form-control" id="Physical Examination Observations" name="Physical Examination Observations" placeholder="Enter observations..."></textarea>
<label for="Physical Examination Palpation">Palpation:</label>
<textarea class="form-control" id="Physical Examination Palpation" name="Physical Examination Palpation" placeholder="Enter palpation details..."></textarea>
<label for="Physical Examination Muscle Tone">Muscle Tone:</label>
<textarea class="form-control" id="Physical Examination Muscle Tone" name="Physical Examination Muscle Tone" placeholder="Describe muscle tone..."></textarea>
<label for="Physical Examination Muscle Power">Muscle Power:</label>
<textarea class="form-control" id="Physical Examination Muscle Power" name="Physical Examination Muscle Power" placeholder="Describe muscle power..."></textarea>
<label for="Physical Examination Reflexes">Reflexes:</label>
<textarea class="form-control" id="Physical Examination Reflexes" name="Physical Examination Reflexes" placeholder="Describe reflexes..."></textarea>
<!-- Developmental Milestones -->
<!-- Kept mt-4 for spacing between top-level fieldsets -->
<fieldset class="developmental-milestones mt-4">
<legend>Developmental Milestones</legend>
<!-- Gross motor-evaluation Skills -->
<!-- Keep mb-3 for spacing between nested fieldsets -->
<fieldset class="gross-motor-evaluation-skills mb-3">
<legend>Gross motor-evaluation Skills</legend>
<!-- Added form-check class to div wrappers -->
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Head Control" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Head Control" type="checkbox" value="Head Control"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Head Control">Head Control</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Rolling" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Rolling" type="checkbox" value="Rolling"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Rolling">Rolling</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Reaching" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Reaching" type="checkbox" value="Reaching"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Reaching">Reaching</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Crawling" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Crawling" type="checkbox" value="Crawling"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Crawling">Crawling</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Sitting" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Sitting" type="checkbox" value="Sitting"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Sitting">Sitting</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Standing" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Standing" type="checkbox" value="Standing"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Standing">Standing</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Kneeling" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Kneeling" type="checkbox" value="Kneeling"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Kneeling">Kneeling</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills One-legged Kneeling" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills One-legged Kneeling" type="checkbox" value="One-legged Kneeling"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills One-legged Kneeling">One-legged Kneeling</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills One-leg Standing" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills One-leg Standing" type="checkbox" value="One-leg Standing"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills One-leg Standing">One-leg Standing</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Jumping" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Jumping" type="checkbox" value="Jumping"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Jumping">Jumping</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Gross motor-evaluation Skills Stairs Climbing" name="Physical Examination Developmental Milestones Gross motor-evaluation Skills Stairs Climbing" type="checkbox" value="Stairs Climbing"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Gross motor-evaluation Skills Stairs Climbing">Stairs Climbing</label></div>
</fieldset>
<!-- Speech -->
<fieldset class="speech-skills mb-3">
<legend>Speech Skills</legend>
<!-- Added form-check class to div wrappers -->
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Speech Skills Babbling" name="Physical Examination Developmental Milestones Speech Skills Babbling" type="checkbox" value="Babbling"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Speech Skills Babbling">Babbling</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Speech Skills Single Words" name="Physical Examination Developmental Milestones Speech Skills Single Words" type="checkbox" value="Single Words"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Speech Skills Single Words">Single Words</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Speech Skills Two-Word Phrases" name="Physical Examination Developmental Milestones Speech Skills Two-Word Phrases" type="checkbox" value="Two-Word Phrases"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Speech Skills Two-Word Phrases">Two-Word Phrases</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Speech Skills Speaking Sentences" name="Physical Examination Developmental Milestones Speech Skills Speaking Sentences" type="checkbox" value="Sentences"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Speech Skills Speaking Sentences">Speaking Sentences</label></div>
</fieldset>
<!-- Language -->
<fieldset class="language-skills mb-3">
<legend>Language Skills</legend>
<!-- Added form-check class to div wrappers -->
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Language Skills Following Simple Instructions" name="Physical Examination Developmental Milestones Language Skills Following Simple Instructions" type="checkbox" value="Following Simple Instructions"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Language Skills Following Simple Instructions">Following Simple Instructions</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Language Skills Understanding Questions" name="Physical Examination Developmental Milestones Language Skills Understanding Questions" type="checkbox" value="Understanding Questions"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Language Skills Understanding Questions">Understanding Questions</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Language Skills Naming Objects" name="Physical Examination Developmental Milestones Language Skills Naming Objects" type="checkbox" value="Naming Objects"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Language Skills Naming Objects">Naming Objects</label></div>
</fieldset>
<!-- Fine motor-evaluation Skills -->
<fieldset class="fine-motor-evaluation-skills mb-3">
<legend>Fine motor-evaluation Skills</legend>
<!-- Added form-check class to div wrappers -->
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Fine motor-evaluation Skills Grasping Objects" name="Physical Examination Developmental Milestones Fine motor-evaluation Skills Grasping Objects" type="checkbox" value="Grasping Objects"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Fine motor-evaluation Skills Grasping Objects">Grasping Objects</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Fine motor-evaluation Skills Stacking Blocks" name="Physical Examination Developmental Milestones Fine motor-evaluation Skills Stacking Blocks" type="checkbox" value="Stacking Blocks"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Fine motor-evaluation Skills Stacking Blocks">Stacking Blocks</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Fine motor-evaluation Skills Holding Crayons" name="Physical Examination Developmental Milestones Fine motor-evaluation Skills Holding Crayons" type="checkbox" value="Holding Crayons"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Fine motor-evaluation Skills Holding Crayons">Holding Crayons</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Fine motor-evaluation Skills Drawing Shapes" name="Physical Examination Developmental Milestones Fine motor-evaluation Skills Drawing Shapes" type="checkbox" value="Drawing Shapes"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Fine motor-evaluation Skills Drawing Shapes">Drawing Shapes</label></div>
</fieldset>
<!-- Social Skills -->
<fieldset class="social-skills mb-3">
<legend>Social Skills</legend>
<!-- Added form-check class to div wrappers -->
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Social Skills Smiling" name="Physical Examination Developmental Milestones Social Skills Smiling" type="checkbox" value="Smiling"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Social Skills Smiling">Smiling</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Social Skills Playing with Others" name="Physical Examination Developmental Milestones Social Skills Playing with Others" type="checkbox" value="Playing with Others"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Social Skills Playing with Others">Playing with Others</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Social Skills Sharing" name="Physical Examination Developmental Milestones Social Skills Sharing" type="checkbox" value="Sharing"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Social Skills Sharing">Sharing</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Social Skills Expressing Emotions" name="Physical Examination Developmental Milestones Social Skills Expressing Emotions" type="checkbox" value="Expressing Emotions"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Social Skills Expressing Emotions">Expressing Emotions</label></div>
</fieldset>
<!-- Cognitive Skills -->
<fieldset class="cognitive-skills mb-3">
<legend>Cognitive Skills</legend>
<!-- Added form-check class to div wrappers -->
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Cognitive Skills Recognizing Faces" name="Physical Examination Developmental Milestones Cognitive Skills Recognizing Faces" type="checkbox" value="Recognizing Faces"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Cognitive Skills Recognizing Faces">Recognizing Faces</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Cognitive Skills Problem Solving" name="Physical Examination Developmental Milestones Cognitive Skills Problem Solving" type="checkbox" value="Problem Solving"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Cognitive Skills Problem Solving">Problem Solving</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Cognitive Skills Memory Development" name="Physical Examination Developmental Milestones Cognitive Skills Memory Development" type="checkbox" value="Memory Development"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Cognitive Skills Memory Development">Memory Development</label></div>
<div class="form-check"><input class="form-check-input" id="Physical Examination Developmental Milestones Cognitive Skills Attention Span" name="Physical Examination Developmental Milestones Cognitive Skills Attention Span" type="checkbox" value="Attention Span"/> <label class="form-check-label" for="Physical Examination Developmental Milestones Cognitive Skills Attention Span">Attention Span</label></div>
</fieldset>
</fieldset>
<fieldset class="neurological-evaluation mt-4">
<legend>Neurological Evaluation</legend>
<label for="Neurological Evaluation Consciousness">Consciousness:</label>
<textarea class="form-control" id="Neurological Evaluation Consciousness" name="Neurological Evaluation Consciousness" placeholder="Describe level of consciousness..."></textarea>
<label for="Neurological Evaluation Cranial Nerves">Cranial Nerves:</label><input class="form-control" id="Neurological Evaluation Cranial Nerves" name="Neurological Evaluation Cranial Nerves" placeholder="Describe cranial nerves..." type="text"/>
<label for="Neurological Evaluation Gait evaluation">Gait evaluation:</label>
<textarea class="form-control" id="Neurological Evaluation Gait evaluation" name="Neurological Evaluation Gait evaluation" placeholder="Describe gait evaluation..."></textarea>
<label for="Neurological Evaluation Balance evaluation">Balance evaluation:</label>
<textarea class="form-control" id="Neurological Evaluation Balance evaluation" name="Neurological Evaluation Balance evaluation" placeholder="Describe balance evaluation..."></textarea>
<label for="Neurological Evaluation motor-evaluation">motor-evaluation</label>
<textarea class="form-control" id="Neurological Evaluation motor-evaluation" name="Neurological Evaluation motor-evaluation" placeholder="Describe motor-evaluation..."></textarea>
<!-- Corrected closing label tag -->
<label for="Neurological Evaluation Sensory-evaluation">Sensory-evaluation:</label><input class="form-control" id="Neurological Evaluation Sensory-evaluation" name="Neurological Evaluation Sensory-evaluation" placeholder="Describe sensory-evaluation..." type="text"/>
<label for="Neurological Evaluation Coordination evaluation">Coordination evaluation:</label>
<textarea class="form-control" id="Neurological Evaluation Coordination evaluation" name="Neurological Evaluation Coordination evaluation" placeholder="Describe coordination evaluation..."></textarea>
<!-- Corrected for/id mismatch and closing label tag -->
<label for="Neurological Evaluation Others">Others:</label><input class="form-control" id="Neurological Evaluation Others" name="Neurological Evaluation Others" placeholder="Describe if there are other findings..." type="text"/>
</fieldset>
<fieldset class="DAP mt-4">
<legend>Diagnosis treatment and plan</legend>
<label for="Diagnosis treatment and plan Diagnosis">Diagnosis:</label>
<input class="form-control" id="Diagnosis treatment and plan Diagnosis" name="Diagnosis treatment and plan Diagnosis" placeholder="Enter diagnosis..." type="text"/>
<label for="Diagnosis treatment and plan Treatment">Treatment:</label>
<input class="form-control" id="Diagnosis treatment and plan Treatment" name="Diagnosis treatment and plan Treatment" placeholder="Enter treatment..." type="text"/>
<label for="Diagnosis treatment and plan Plan">Plan:</label>
<input class="form-control" id="Diagnosis treatment and plan Plan" name="Diagnosis treatment and plan Plan" placeholder="Enter plan..." type="text"/>
</fieldset>
<!-- Removed extra </fieldset> here -->
<div class="mt-3" id="neuroForm-message"></div>
<div class="form-group mt-3">
<button class="btn btn-success" type="submit">Submit</button>
<button class="btn btn-danger" type="reset">Reset</button>
</div>
</form>
<script>
    // Toggle each fieldset on legend click
    document.querySelectorAll("fieldset").forEach((fieldset) => {
        const legend = fieldset.querySelector("legend");
        if (!legend) return;

        // Add ARIA attributes and make legend focusable for accessibility
        legend.setAttribute("role", "button");
        legend.setAttribute("tabindex", "0");
        // Set initial aria-expanded state based on if it has the 'expanded' class
        legend.setAttribute("aria-expanded", fieldset.classList.contains("expanded"));

        legend.addEventListener("click", () => {
            // Toggle the expanded class
            fieldset.classList.toggle("expanded");

            // Update aria-expanded attribute
            const isExpanded = fieldset.classList.contains("expanded");
            legend.setAttribute("aria-expanded", isExpanded);
        });

        // Allow toggling with Enter or Space key when legend is focused
        legend.addEventListener("keydown", (event) => {
            // Check if the event target is the legend itself to avoid triggering on elements *within* the legend if any were added
            if (event.target === legend && (event.key === "Enter" || event.key === " ")) {
                event.preventDefault(); // Prevent default space/enter action (like scrolling)
                legend.click(); // Simulate a click to trigger the toggle
            }
        });
    });
</script>
<script src="../js/form_handler.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof initFormSubmissionHandler === 'function') {
      initFormSubmissionHandler('neuroForm', 'neuroForm-message');
    } else {
      console.error('Error: initFormSubmissionHandler is not defined. Check if form_handler.js is loaded correctly.');
    }
  });
</script>
</div>